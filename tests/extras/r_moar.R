# test script checking that all installed libraries are present

# Load the testthat package
library(testthat)

# List of libraries to check
libraries_to_check <- c(
    "ASSET",
    "brant",
    "brms",
    "broom",
    "carat",
    "car",
    "cfdr.pleio",
    "cFDR-common-controls",
    "clusterProfiler",
    "corrplot",
    "CPBayes",
    "DBI",
    "dendextend",
    "e1071",
    "fastICA",
    "fcfdr",
    "foreign",
    "GCPBayes",
    "geepack",
    "ggthemes",
    "ggpubr",
    "glmnet",
    "gplots",
    "gridExtra",
    "haven",
    "imputeMissings",
    "lavaan",
    "lme4",
    "lmerTest",
    "lubridate",
    "MASS",
    "MatrixEQTL",
    "mgcv",
    "miniCRAN",
    "modelr",
    "moments",
    "MVN",
    "nlme",
    "normentR",
    "officer",
    "parallel",
    "patchwork",
    "PLACO",
    "pracma",
    "RColorBrewer",
    "Rcpp",
    "readxl",
    "readr",
    "rjags",
    "ROCR",
    "RSQLite",
    "rstan",
    "scales",
    "semptools",
    "semTools",
    "simplecolors",
    "sp",
    "splines",
    "splines2",
    "stats",
    "stats4",
    "survival",
    "survminer",
    "tidyverse",
    "tree",
    "viridis",

    "AnnotationDbi",
    "arsenal",
    "ASSET",
    "biomaRt",
    "biomartr",
    "cfdr",
    "cFDR-common-controls",
    "cfdr.pleio",
    "circlize",
    "clusterProfiler",
    "CPBayes",
    "correlation",
    "fcfdr",
    "GCPBayes",
    "ggstar",
    "ggcorrplot",
    "ggalluvial",
    "ggseg",
    "ggseg3d",
    "glmExtras",
    "homologene",
    "ieugwasr",
    "jtools",
    "limma",
    "lmerTest",
    "miniCRAN",
    "gwasvcf",
    "gwasglue",
    "MultiABEL",
    "org.Hs.eg.db",
    "phenotools",
    "PLACO",
    "pracma",
    "psych",
    "rtracklayer",
    "TMixClust"

)

# Define a test
test_that("Required libraries are installed", {
  missing_libraries <- setdiff(libraries_to_check, installed.packages()[, "Package"])
  expect_true(length(missing_libraries) == 0, 
              sprintf("Missing libraries: %s", paste(missing_libraries, collapse = ", ")))
})